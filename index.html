<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8" />
  <title>Tr√≤ ch∆°i nh·ªè cho Trang ‚ù§Ô∏è</title>
  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: linear-gradient(135deg, #ff9a9e, #fad0c4);
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
    .container {
      width: 800px;
      max-width: 95%;
      background: rgba(255,255,255,0.95);
      border-radius: 20px;
      padding: 20px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2);
    }
    h1, h2 {
      text-align: center;
      color: #ff4d6d;
    }
    .question {
      font-size: 20px;
      margin-bottom: 20px;
      text-align: center;
    }
    button {
      padding: 10px 22px;
      border: none;
      border-radius: 25px;
      background: #ff4d6d;
      color: white;
      font-size: 16px;
      cursor: pointer;
      margin: 8px;
    }
    button:hover {
      background: #e63956;
    }
    canvas {
      display: none;
      background: linear-gradient(#87ceeb, #e0f7fa);
      border-radius: 15px;
      margin: 0 auto;
    }
    #loveText {
      display: none;
      text-align: center;
      font-size: 48px;
      color: #ff4d6d;
      font-weight: bold;
      margin-top: 30px;
    }
    #login {
      text-align: center;
    }
  </style>
</head>
<body>
  <div class="container">

    <!-- LOGIN -->
    <div id="login">
      <h1>Nh·∫≠p m·∫≠t kh·∫©u ƒëi Trang üòù</h1>
      <input type="password" id="password" placeholder="Nh·∫≠p m·∫≠t kh·∫©u" />
      <br><br>
      <button onclick="checkPass()">V√†o game</button>
    </div>

    <!-- QUIZ -->
    <div id="quiz" style="display:none;">
      <h1>C√¢u h·ªèi ·ª©c ch·∫ø cho Trang üòÜ</h1>
      <div class="question" id="question"></div>
      <div id="answers"></div>
    </div>

    <!-- GAME -->
    <canvas id="game" width="760" height="200"></canvas>

    <div id="loveText">Anh y√™u Em ‚ù§Ô∏è</div>
  </div>

  <script>
    // LOGIN
    function checkPass() {
      const pass = document.getElementById('password').value;
      if (pass === 'NTTT') {
        document.getElementById('login').style.display = 'none';
        document.getElementById('quiz').style.display = 'block';
        showQuestion();
      } else {
        alert('Sai m·∫≠t kh·∫©u r·ªìi üòù');
      }
    }

    // QUIZ DATA
    const questions = [
      {
        q: '1. Anh nh·∫Øn tin m√† Trang seen kh√¥ng rep l√† v√¨ sao?',
        a: ['B·∫≠n x√≠u', 'C·ªë t√¨nh cho anh ch·ªù']
      },
      {
        q: '2. Khi anh n√≥i "Anh kh√¥ng sao" th√¨ nghƒ©a l√†?',
        a: ['·ªîn th·∫≠t', 'Kh√¥ng ·ªïn t√≠ n√†o']
      },
      {
        q: '3. Trang h·ªèi "Anh c√≥ gi·∫≠n kh√¥ng?" th√¨ ƒë√°p √°n ƒë√∫ng l√†?',
        a: ['Kh√¥ng', 'C√≥ nh∆∞ng v·∫´n y√™u']
      },
      {
        q: '4. C√£i nhau xong ai ph·∫£i l√†m l√†nh tr∆∞·ªõc?',
        a: ['Anh', 'V·∫´n l√† anh']
      }
    ];

    let qIndex = 0;

    function showQuestion() {
      if (qIndex >= questions.length) {
        startGame();
        return;
      }
      document.getElementById('question').innerText = questions[qIndex].q;
      const ansDiv = document.getElementById('answers');
      ansDiv.innerHTML = '';
      questions[qIndex].a.forEach(() => {
        const btn = document.createElement('button');
        btn.innerText = 'Ch·ªçn';
        btn.onclick = () => {
          qIndex++;
          showQuestion();
        };
        ansDiv.appendChild(btn);
      });
    }

    // GAME
    let canvas = document.getElementById('game');
    let ctx = canvas.getContext('2d');
    let player = { x: 50, y: 150, w: 20, h: 20, vy: 0, jumpCount: 0 };
    let obstacles = [];
    let gravity = 0.8;
    let speed = 4;
    let gameRunning = false;

    function startGame() {
      document.getElementById('quiz').style.display = 'none';
      canvas.style.display = 'block';
      obstacles = [{ x: 400, w: 20 }, { x: 600, w: 20 }];
      gameRunning = true;
      requestAnimationFrame(loop);
    }

    document.addEventListener('keydown', e => {
      if (e.code === 'Space' && player.jumpCount < 2) {
        player.vy = -12;
        player.jumpCount++;
      }
    });

    function loop() {
      if (!gameRunning) return;
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      player.vy += gravity;
      player.y += player.vy;
      if (player.y >= 150) {
        player.y = 150;
        player.vy = 0;
        player.jumpCount = 0;
      }
      ctx.fillStyle = '#ff4d6d';
      ctx.fillRect(player.x, player.y, player.w, player.h);

      ctx.fillStyle = '#333';
      obstacles.forEach(obs => {
        obs.x -= speed;
        ctx.fillRect(obs.x, 150, obs.w, 20);
        if (obs.x < -20) obs.x = canvas.width + Math.random() * 200;

        if (
          player.x < obs.x + obs.w &&
          player.x + player.w > obs.x &&
          player.y + player.h > 150
        ) {
          alert('Thua r·ªìi üòù ch∆°i l·∫°i nha');
          location.reload();
        }
      });

      if (player.x > canvas.width - 60) {
        gameRunning = false;
        canvas.style.display = 'none';
        document.getElementById('loveText').style.display = 'block';
      }

      player.x += 1;
      requestAnimationFrame(loop);
    }
  </script>
</body>
</html>
